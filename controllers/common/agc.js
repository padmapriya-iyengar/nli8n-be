const express = require('express')
const agc = express.Router({mergeParams: true})

const fileRouter = require('./file')
const requestRouter = require('./request')
const circulationRouter = require('./circulation')
const documentRouter = require('./document')
const migrationRouter = require('./migration')
const advisory = require('../advisory/advisory')
const db = require('../../services/common')
const config = require('../../root/config')
const masterServ = require('../../services/agc_master')
const notfServ = require('../../services/agc_notification')
const userServ = require('../../services/agc_user')
const userDivServ = require('../../services/agc_user_division')
const userPrfServ = require('../../services/agc_user_profile')
const seqServ = require('../../services/agc_sequence')
const rx = require('rxjs')

agc.use('/file',fileRouter)
agc.use('/request',requestRouter)
agc.use('/advisory',advisory)
agc.use('/circulation',circulationRouter)
agc.use('/document',documentRouter)
agc.use('/migration',migrationRouter)

agc.get('/',(req,res) => {
    logger.info('Inside root agc script!!')
    res.status(200)
})

agc.get('/master-data',(req,res) => {
    masterServ.getMasterData(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/notifications',(req,res) => {
    notfServ.getUserNotifications(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.post('/notifications',(req,res) => {
    notfServ.updateUserNotifications(req.query,req.body).then((rows)=>{
        notfServ.getUserNotificationByID(req.query).then((rows)=>{
            res.status(200).json(rows)
        }).catch((err)=>setImmediate(()=>{throw err}));
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/user-divisions',(req,res) => {
    userDivServ.getUserDivisions(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/users',(req,res) => {
    userServ.getAllUsers().then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/user-profile',(req,res) => {
    userPrfServ.getUserProfile(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/user-details',(req,res) => {
    userServ.getUserInfo(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.post('/user-profile',(req,res) => {
    userPrfServ.updateUserProfile(req.query,req.body).then((rows)=>{
        userPrfServ.getUserProfile(req.query).then((rows)=>{
            res.status(200).json(rows)
        }).catch((err)=>setImmediate(()=>{throw err}));
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.post('/sequence',(req,res) => {
    seqServ.generateSequence(req.query).then((rows)=>{
        seqServ.getSequence(req.query).then((rows)=>{
            res.status(200).json(rows)
        }).catch((err)=>setImmediate(()=>{throw err}));
    }).catch((err)=>setImmediate(()=>{throw err}));
})

agc.get('/sequence',(req,res) => {
    seqServ.getSequence(req.query).then((rows)=>{
        res.status(200).json(rows)
    }).catch((err)=>setImmediate(()=>{throw err}));
})

//finish the error handling
agc.get('/task-data/:task-type',(req,res) => {
    let response = {
        "tuple":{"old":{"getSharedTasks":{"getSharedTasks":{"TaskDetailsResponse":{"TaskDetails":[{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-9906-1926F12D6828","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"IAD Adv File Testing 14-11-2022","FILE_TITLE":"IAD Adv File Testing 14-11-2022","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000042","REQUEST_ID":"ADV000000129","CIRCULATION_ID":"","DELIVERY_DATE":"2022-11-14T12:32:26.0","REQUEST_DUE_DATE":"Thu Dec 01 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-11-14T08:30:34Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.3145730","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.3194888","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.3194888.2949134","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-96A3-C3DD524B6827","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Demo Test 2-11-2022","FILE_TITLE":"Demo Test 2-11-2022","FILE_REF_NO":"AG/IAD/AIR/FIRS/2022/000000008","REQUEST_ID":"ADV000000091","CIRCULATION_ID":"","DELIVERY_DATE":"2022-11-02T09:16:48.400000000","REQUEST_DUE_DATE":"Fri Nov 18 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-11-25T12:00:00Z","TASK_STATUS":"In-Progress","TASK_FROM":"","ACTION_OFFICER":"iadlo1","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.3129350","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.3145729","LAYOUT_ID":"002248573547A1ECA2C1993A6EFCA819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.3145729.2899969","REQUEST_STATE":"Draft","TARGET_TYPE":"user","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-88AA-E9948093A825","OPEN_DEFAULT_LAYOUT_ID":"Y","TASK_TITLE":"Test for MLA request - Demo - 001","FILE_TITLE":"Test for MLA request - Demo - 001","FILE_REF_NO":"AG/IAD/MLA-T/HK/2022/000000001","REQUEST_ID":"MLA000000001","CIRCULATION_ID":"","DELIVERY_DATE":"2022-08-23T06:20:17.350000000","REQUEST_DUE_DATE":"Mon Aug 15 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-05-30T12:33:48Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342919","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"MLA","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2703363","LAYOUT_ID":"002248573547A1ECA970AD0E1F05A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2703363.2834437","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-88AA-D7A9A0FCA825","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Request for File Security 1","FILE_TITLE":"Request for File Security 1","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000003","REQUEST_ID":"ADV000000004","CIRCULATION_ID":"","DELIVERY_DATE":"2022-08-23T06:18:23.550000000","REQUEST_DUE_DATE":"Tue Aug 16 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-05-31T12:00:00Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"iadlo2","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2359297","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2719746","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2719746.2834436","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-88A9-BEF3C75E6825","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"TEst for request documents security","FILE_TITLE":"TEst for request documents security","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000026","REQUEST_ID":"ADV000000070","CIRCULATION_ID":"","DELIVERY_DATE":"2022-08-23T05:46:55.950000000","REQUEST_DUE_DATE":"Wed Aug 24 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-07-27T02:13:38Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"iadlo2","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.3014658","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.3063810","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.3063810.2834435","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-8779-D976DA3EE825","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Demo Request 3","FILE_TITLE":"Demo Request 3","FILE_REF_NO":"AG/IAD/AIR-C/1/2022/000000005","REQUEST_ID":"ADV000000083","CIRCULATION_ID":"","DELIVERY_DATE":"2022-08-17T04:45:27.627000000","REQUEST_DUE_DATE":"Tue Aug 09 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-08-04T01:59:56Z","TASK_STATUS":"In-Progress","TASK_FROM":"test request","ACTION_OFFICER":"","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.3031062","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.3080201","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.3080201.2834434","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-8658-2F1C5FC7E825","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"TEst for request history","FILE_TITLE":"TEst for request history","FILE_REF_NO":"AG/IAD/AIR-C/FIRS/2022/000000001","REQUEST_ID":"ADV000000066","CIRCULATION_ID":"","DELIVERY_DATE":"2022-08-11T10:31:28.027000000","REQUEST_DUE_DATE":"Fri Aug 19 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-07-27T12:00:00Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342928","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.3047425","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.3047425.2834433","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-8062-404C2ACAA823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Test 551","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000038","REQUEST_ID":"","CIRCULATION_ID":"CIR000000031","DELIVERY_DATE":"2022-07-12T02:19:16.473000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Draft","TASK_FROM":"DemoUser2","ACTION_OFFICER":"DemoUser3","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.3129345","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1146881","LAYOUT_ID":"002248573547A1ECA0C992EF3E40E817","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1146881.1114113","REQUEST_STATE":"Draft","TARGET_TYPE":"user","PROCESS_NAME":"Circulation"},{"URGENCY":"Urgent","URGENCYMARK":"!","TASK_ID":"00224857-3547-A1EC-BF14-D71789A7A823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Test for sla breach","FILE_TITLE":"Test for sla breach","FILE_REF_NO":"AG/IAD/AIR/2/2022/000000001","REQUEST_ID":"ADV000000038","CIRCULATION_ID":"","DELIVERY_DATE":"2022-07-05T11:12:34.910000000","REQUEST_DUE_DATE":"Wed Jun 29 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-21T12:00:00Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"DemoUser2","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342933","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2899975","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2899975.2670631","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BF0D-D3F57B1DA823","OPEN_DEFAULT_LAYOUT_ID":"Y","TASK_TITLE":"Request for Actions","FILE_TITLE":"Request for Actions","FILE_REF_NO":"AG/IAD/MLA-T/HK/2022/000000010","REQUEST_ID":"MLA000000006","CIRCULATION_ID":"","DELIVERY_DATE":"2022-07-05T07:51:46.300000000","REQUEST_DUE_DATE":"Tue Aug 02 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-07-05T01:18:21Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"jyoDemoUser2thi","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2801668","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"MLA","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2949143","LAYOUT_ID":"002248573547A1ECA970AD0E1F05A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2949143.2670629","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BE47-43A5FCCE2823","OPEN_DEFAULT_LAYOUT_ID":"Y","TASK_TITLE":"Request for actions check 2","FILE_TITLE":"Request for actions check 2","FILE_REF_NO":"AG/IAD/AIR/2/2021/000000001","REQUEST_ID":"ADV000000040","CIRCULATION_ID":"","DELIVERY_DATE":"2022-07-01T09:06:18.150000000","REQUEST_DUE_DATE":"Thu Jul 07 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-29T12:05:03Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"DemoUser1","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2359341","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2932738","LAYOUT_ID":"002248573547A1ECA970AD0E1EFC681B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2932738.2670623","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BE45-93C06D09A823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Test for actions","FILE_TITLE":"Test for actions","FILE_REF_NO":"AG/IAD/AIR/1/2021/000000004","REQUEST_ID":"ADV000000049","CIRCULATION_ID":"","DELIVERY_DATE":"2022-07-01T08:17:56.767000000","REQUEST_DUE_DATE":"Fri Jul 29 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-07-01T01:46:03Z","TASK_STATUS":"In-Progress","TASK_FROM":"test","ACTION_OFFICER":"iadlo1","ASSIGNEE":"harsha","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2392117","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2949130","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2949130.2670616","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BE16-7B2AD19AA823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"MLA request for different actions","FILE_TITLE":"MLA request for different actions","FILE_REF_NO":"AG/IAD/EXTR-F/FIN/2021/000000001","REQUEST_ID":"MLA000000005","CIRCULATION_ID":"","DELIVERY_DATE":"2022-06-30T09:49:34.410000000","REQUEST_DUE_DATE":"Thu Jul 28 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-30T03:04:25Z","TASK_STATUS":"Assigned","TASK_FROM":"test","ACTION_OFFICER":"DemoUser3","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2752516","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Extradition","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2949121","LAYOUT_ID":"002248573547A1ECA392D4444FB4281A","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2949121.2670603","REQUEST_STATE":"Assign within Division","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BDE4-BB909C886823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Request to check actions 3","FILE_TITLE":"Request to check actions 3","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000004","REQUEST_ID":"ADV000000041","CIRCULATION_ID":"","DELIVERY_DATE":"2022-06-29T10:05:06.457000000","REQUEST_DUE_DATE":"Thu Jul 07 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-29T01:48:08Z","TASK_STATUS":"Open","TASK_FROM":"test","ACTION_OFFICER":"iadlo1","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2392114","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2932739","LAYOUT_ID":"002248573547A1ECA2C9120D41FB2819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2932739.2654214","REQUEST_STATE":"Assign within Division","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BDDD-54EE89DC2823","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Request for Actions check","FILE_TITLE":"Request for Actions check","FILE_REF_NO":"AG/IAD/AIR/2/2022/000000001","REQUEST_ID":"ADV000000039","CIRCULATION_ID":"","DELIVERY_DATE":"2022-06-29T06:33:11.223000000","REQUEST_DUE_DATE":"Thu Jul 07 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-29T11:56:05Z","TASK_STATUS":"Open","TASK_FROM":"test","ACTION_OFFICER":"DemoUser2","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342933","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2932737","LAYOUT_ID":"002248573547A1ECA2C9120D41FB2819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2932737.2654210","REQUEST_STATE":"Assign within Division","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-BC86-2B23455B2822","OPEN_DEFAULT_LAYOUT_ID":"Y","TASK_TITLE":"New Test Request harsha","FILE_TITLE":"New Test Request harsha","FILE_REF_NO":"AG/IAD/AIR-C/FIRS/2021/000000001","REQUEST_ID":"ADV000000036","CIRCULATION_ID":"","DELIVERY_DATE":"2022-06-22T10:47:23.677000000","REQUEST_DUE_DATE":"Wed Jun 29 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-22T12:00:00Z","TASK_STATUS":"Open","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2752514","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2899973","LAYOUT_ID":"002248573547A1ECA970AD0E1EFC681B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2899973.2621441","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1EC-B8C8-C74AD297681F","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Test for Group Values in Request Participants","FILE_TITLE":"Test for Group Values in Request Participants","FILE_REF_NO":"AG/IAD/AIR/1/2021/000000002","REQUEST_ID":"ADV000000006","CIRCULATION_ID":"","DELIVERY_DATE":"2022-06-03T09:54:15.530000000","REQUEST_DUE_DATE":"Fri Aug 19 00:00:00 UTC 2022","EXPECTED_RESPONSE_DATE":"2022-06-03T12:00:00Z","TASK_STATUS":"Open","TASK_FROM":"test","ACTION_OFFICER":"","ASSIGNEE":"DemoUser1","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2359298","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"Y","REQUEST_TYPE":"Advisory","ITEM_ID":"002248573547A1EC9F382DC3A9CD6817.2719748","LAYOUT_ID":"002248573547A1ECA2C9120D4202A819","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA2C843FF7C67A819.2719748.2441224","REQUEST_STATE":"Return to Registry","TARGET_TYPE":"role","PROCESS_NAME":"Request"}]}}}}}
      }
    res.status(200).json(response)
})

//finish the error handling
agc.get('/delegated-tasks/:task-type/:userid',(req,res) => {
    let response = {
        "tuple":{"old":{"getDelegatedTasksForUser":{"getDelegatedTasksForUser":{"TaskDetailsResponse":{"TaskDetails":[{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-822D-8B0354C7A824","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Cir PA Test 5","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000002","REQUEST_ID":"","CIRCULATION_ID":"CIR000000038","DELIVERY_DATE":"2022-07-21T05:30:10.653000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Inprogress","TASK_FROM":"iadlo1","ACTION_OFFICER":"iadlo3","ASSIGNEE":"iadlo3","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342914","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1196037","LAYOUT_ID":"002248573547A1ECA970F4BBD4D0A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1196037.1163274","REQUEST_STATE":"Inprogress","TARGET_TYPE":"role","PROCESS_NAME":"Circulation"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-822D-6D265F582824","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Cir PA Test 4","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000002","REQUEST_ID":"","CIRCULATION_ID":"CIR000000037","DELIVERY_DATE":"2022-07-21T05:26:50.810000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Inprogress","TASK_FROM":"iadlo1","ACTION_OFFICER":"iadlo3","ASSIGNEE":"iadlo3","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342914","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1196036","LAYOUT_ID":"002248573547A1ECA970F4BBD4D0A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1196036.1163272","REQUEST_STATE":"Inprogress","TARGET_TYPE":"role","PROCESS_NAME":"Circulation"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-822D-5B3BE88FA824","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Cir PA Test 3","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000002","REQUEST_ID":"","CIRCULATION_ID":"CIR000000036","DELIVERY_DATE":"2022-07-21T05:24:47.437000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Inprogress","TASK_FROM":"iadlo1","ACTION_OFFICER":"iadlo3","ASSIGNEE":"iadlo3","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342914","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1196035","LAYOUT_ID":"002248573547A1ECA970F4BBD4D0A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1196035.1163270","REQUEST_STATE":"Inprogress","TARGET_TYPE":"role","PROCESS_NAME":"Circulation"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-822D-2B7300306824","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Cir PA Test 2","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000002","REQUEST_ID":"","CIRCULATION_ID":"CIR000000035","DELIVERY_DATE":"2022-07-21T05:19:28.697000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Inprogress","TASK_FROM":"iadlo1","ACTION_OFFICER":"iadlo3","ASSIGNEE":"iadlo3","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342914","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1196034","LAYOUT_ID":"002248573547A1ECA970F4BBD4D0A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1196034.1163268","REQUEST_STATE":"Inprogress","TARGET_TYPE":"role","PROCESS_NAME":"Circulation"},{"URGENCY":"Not Urgent","URGENCYMARK":"","TASK_ID":"00224857-3547-A1ED-822C-AC84C974A824","OPEN_DEFAULT_LAYOUT_ID":"N","TASK_TITLE":"Cir PA Test 1","FILE_TITLE":"","FILE_REF_NO":"AG/IAD/AIR/1/2022/000000002","REQUEST_ID":"","CIRCULATION_ID":"CIR000000034","DELIVERY_DATE":"2022-07-21T05:05:20.197000000","REQUEST_DUE_DATE":"","EXPECTED_RESPONSE_DATE":"","TASK_STATUS":"Inprogress","TASK_FROM":"iadlo1","ACTION_OFFICER":"iadlo3","ASSIGNEE":"iadlo3","LOCKED_TIME":"","REGISTRATION_NO":"","MAIN_FILE_ITEM_ID":"002248573547A1EC9E9CF72B1B84A817.2342914","RETENTION_PERIOD":"null","DISPOSITION_DATE":"null","DISPOSITION_ACTION":"null","LAST_ACTION_DATE":"null","FILE_TYPE":"null","CONVERSION_DATE":"null","TRANSFER_DATE":"null","SLA_BREACH":"N","REQUEST_TYPE":"Circulation","ITEM_ID":"002248573547A1ECA0C96326EA372817.1196033","LAYOUT_ID":"002248573547A1ECA970F4BBD4D0A81B","TASK_ENTITY_INSTANCE_ID":"002248573547A1ECA6914EC3CF45E81A.1196033.1163266","REQUEST_STATE":"Inprogress","TARGET_TYPE":"role","PROCESS_NAME":"Circulation"}]}}}}}
      }
    res.status(200).json(response)
})

//finish the error handling
agc.get('/menu',(req,res) => {
    let response = {"Services":{"MenuService":[{"Services":{"Title":{"Value":"ADVISORY"},"ServiceName":"Advisory","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Advisory Main menu","ServiceTooltip":"Advisory","HasChildren":"true","IsMainService":"false","ServiceCode":"ADVISORY","ServiceIconPath":null,"Services-id":{"Id":"16386","ItemId":"002248573547A1ECA231DC72645DE817.16386"}},"ChildServices":{"Services":[{"Title":{"Value":"ADV_FILE"},"ServiceName":"Create File","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Create New Advisory File","ServiceTooltip":null,"HasChildren":"false","IsMainService":"false","ServiceCode":"ADV_FILE","ServiceIconPath":"/images/a.png","Services-id":{"Id":"16387","ItemId":"002248573547A1ECA231DC72645DE817.16387"}},{"Title":{"Value":"ADV_REQ"},"ServiceName":"Create Request","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Create New Advisory Request","ServiceTooltip":null,"HasChildren":null,"IsMainService":"false","ServiceCode":"ADV_REQ","ServiceIconPath":null,"Services-id":{"Id":"16389","ItemId":"002248573547A1ECA231DC72645DE817.16389"}}]}},{"Services":{"Title":{"Value":"MLA"},"ServiceName":"MLA / Extradition","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"MLA Main menu","ServiceTooltip":null,"HasChildren":"true","IsMainService":"false","ServiceCode":"MLA","ServiceIconPath":null,"Services-id":{"Id":"16388","ItemId":"002248573547A1ECA231DC72645DE817.16388"}},"ChildServices":{"Services":[{"Title":{"Value":"MLA_FILE"},"ServiceName":"Create File","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Create MLA/Extradition File","ServiceTooltip":null,"HasChildren":"false","IsMainService":"false","ServiceCode":"MLA_FILE","ServiceIconPath":null,"Services-id":{"Id":"65538","ItemId":"002248573547A1ECA231DC72645DE817.65538"}},{"Title":{"Value":"MLA_REQ"},"ServiceName":"Create Request","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Create New MLA/Extradition Request","ServiceTooltip":null,"HasChildren":"false","IsMainService":"false","ServiceCode":"MLA_REQ","ServiceIconPath":null,"Services-id":{"Id":"65540","ItemId":"002248573547A1ECA231DC72645DE817.65540"}}]}},{"Services":{"Title":{"Value":"REOPEN_REQ"},"ServiceName":"Re-Open Closed Request","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Re-Open Closed Request","ServiceTooltip":null,"HasChildren":null,"IsMainService":"false","ServiceCode":"REOPEN_REQ","ServiceIconPath":null,"Services-id":{"Id":"16391","ItemId":"002248573547A1ECA231DC72645DE817.16391"}}},{"Services":{"Title":{"Value":"RECALL_REASSIGN"},"ServiceName":"Recall / Reassign Request","ServiceURL":null,"ServiceType":"Application Menu","ServiceDescription":"Recall / Reassign Request","ServiceTooltip":null,"HasChildren":null,"IsMainService":"false","ServiceCode":"RECALL_REASSIGN","ServiceIconPath":null,"Services-id":{"Id":"16392","ItemId":"002248573547A1ECA231DC72645DE817.16392"}}},{"Services":{"Title":{"Value":"DOCUMENT"},"ServiceName":"Upload Document","ServiceURL":"docUpload","ServiceType":"Application Menu","ServiceDescription":"Upload Document","ServiceTooltip":"Upload Document","HasChildren":"false","IsMainService":"false","ServiceCode":null,"ServiceIconPath":null,"Services-id":{"Id":"131071","ItemId":"002248573547A1ECA231DC72645DE817.131071"}}},{"Services":{"Title":{"Value":"MIGRATION_PORTAL"},"ServiceName":"Migration","ServiceURL":"migration","ServiceType":"Application Menu","ServiceDescription":"Migration","ServiceTooltip":"Migration","HasChildren":"false","IsMainService":"false","ServiceCode":null,"ServiceIconPath":null,"Services-id":{"Id":"131076","ItemId":"002248573547A1ECA231DC72645DE817.131076"}}}]}}
    res.status(200).json(response)
})

//finish the error handling
agc.get('/task-count/:type/:userid',(req,res) => {
    let response = {
        "tuple":{"old":{"getSharedTasks":{"getSharedTasks":{"TaskDetailsResponse":{"TaskCounter":{"PersonalTasks":"3","PersonalOverDueTasks":"0","SharedTasks":"12","SharedOverDueTasks":"0","AllTasks":"17","AllOverDueTasks":"0","DraftTasks":"2"}}}}}}
      }
    res.status(200).json(response)
})

//finish the error handling
agc.get('/is-user-lo',(req,res) => {
    let response = {"Groups":{"FunctionalGroup":[{"FunctionalGroup-id":{"Id":"49155","ItemId":"002248573547A1ECA0C26352C534A817.49155"},"GroupName":"IAD","GroupCreatedInOTDS":"Yes","IsDivision":"true","IsChild":"No","GroupDescription":"International Affairs Division","GroupType":"Functional","UserLinkedToGroup":{"@nil":"true"},"Status":"A","Title":{"Value":"IAD"}},{"FunctionalGroup-id":{"Id":"180226","ItemId":"002248573547A1ECA0C26352C534A817.180226"},"GroupName":"Migration Data Admin","GroupCreatedInOTDS":"No","IsDivision":"false","IsChild":"Yes","GroupDescription":"Migration Data Admin","GroupType":"Functional","UserLinkedToGroup":"No","Status":"A","Title":{"Value":"Migration Data Admin"}},{"FunctionalGroup-id":{"Id":"163843","ItemId":"002248573547A1ECA0C26352C534A817.163843"},"GroupName":"SECURITY ADMIN","GroupCreatedInOTDS":"No","IsDivision":"false","IsChild":"Yes","GroupDescription":"Security Administrator","GroupType":"Functional","UserLinkedToGroup":"No","Status":"A","Title":{"Value":"SECURITY ADMIN"}},{"FunctionalGroup-id":{"Id":"1","ItemId":"002248573547A1ECA0C26352C534A817.1"},"GroupName":"AGC","GroupCreatedInOTDS":"Yes","IsDivision":"false","IsChild":"No","GroupDescription":"Attorney General Chambers","GroupType":"Functional","UserLinkedToGroup":{"@nil":"true"},"Status":"A","Title":{"Value":"AGC"}},{"FunctionalGroup-id":{"Id":"49156","ItemId":"002248573547A1ECA0C26352C534A817.49156"},"GroupName":"REGISTRY (IAD)","GroupCreatedInOTDS":"Yes","IsDivision":"false","IsChild":"Yes","GroupDescription":"Registry team of IAD","GroupType":"Functional","UserLinkedToGroup":{"@nil":"true"},"Status":"A","Title":{"Value":"REGISTRY (IAD)"}}]}}
    res.status(200).json(response)
})

//finish the implementation and error handling
agc.post('/login',(req,res) => {
    let newData = req.body;
    res.status(200).json('Login successful!!')
})

//finish the error handling
agc.get('/bosses/:user-name',(req,res) => {
    let response = {
        "PersonalAssistant":{"BossDN":"","I_PAExists":"false","PAName":"Priya_PA","BossName":"IAD_LO_3","I_PAName":"priya_pa","I_BossName":"iadlo3","PersonalAssistant-id":{"Id":"245764","ItemId":"002248573547A1ECAFB4939FF615681E.245764"},"PA":{"Person-id":{"Id":"163856389","ItemId":"F8B156B4FF8F11E6E6562305FE2BDF32.163856389"}},"Boss":{"Person-id":{"Id":"163905543","ItemId":"F8B156B4FF8F11E6E6562305FE2BDF32.163905543"}}}
      }
    res.status(200).json(response)
})
module.exports = agc